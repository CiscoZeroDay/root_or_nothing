<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>E-CORP - Tableau de Bord</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="layout">
    <!-- Sidebar -->
   <aside class="sidebar">
  <div class="logo">E-CORP</div>
    <ul class="menu">
      <li><a href="{{ url_for('dashboard') }}" class="{% if request.path == '/' %}active{% endif %}">Tableau de bord</a></li>
      <li><a href="{{ url_for('gestion_personnel') }}" class="{% if request.path == '/gestion-personnel' %}active{% endif %}">Gestion du personnel</a></li>
      <li><a href="{{ url_for('gestion_temps') }}" class="{% if request.path == '/gestion-temps' %}active{% endif %}">Gestion du temps</a></li>
      <li><a href="{{ url_for('dossiers_rh') }}" class="{% if request.path == '/dossiers-rh' %}active{% endif %}">Dossiers RH</a></li>
      <li><a href="{{ url_for('equipes_departements') }}" class="{% if request.path == '/equipes-departements' %}active{% endif %}">Equipes & D√©partements</a></li>
      <li><a href="{{ url_for('messagerie_interne') }}" class="{% if request.path == '/messagerie-interne' %}active{% endif %}">Messagerie interne</a></li>
    </ul>
  </aside>

    <!-- Main Content -->
    <main class="main">
      <header class="topbar">
      <h1>Bienvenue sur E-CORP</h1>

      <div class="right-actions">
        <form method="GET" action="/search" class="search-bar">
          <input type="text" name="q" placeholder="Rechercher un employ√©..." />
          <button type="submit">üîç</button>
        </form>

        <a href="{{ url_for('logout') }}" class="logout-icon" title="D√©connexion">Se d√©connecter</a>
      </div>
    </header>

    
      <section class="dashboard">
        <div class="charts">
          <div class="chart-box">
            <canvas id="barChart"></canvas>
          </div>
          <div class="chart-box">
            <canvas id="pieChart"></canvas>
          </div>
        </div>

        <div class="map-and-reminders">
          <div class="map-box">
            <img src="static/images/8.jpeg" alt="Carte" />
          </div>
          <div class="reminders">
            <h3>Rappel</h3>
            <ul>
              <li>Conf√©rence - 02/09/2025 <button>joindre</button></li>
              <li>Rendez-vous - 05/09/2025 <button>joindre</button></li>
              <li>Conf√©rence - 09/09/2025 <button>joindre</button></li>
              <li>Rendez-vous - 12/09/2025 <button>joindre</button></li>
              <li>Conf√©rence - 16/09/2025 <button>joindre</button></li>
              <li>Rendez-vous - 19/09/2025 <button>joindre</button></li>
              <li>Conf√©rence - 23/09/2025 <button>joindre</button></li>
              <li>Rendez-vous - 26/09/2025 <button>joindre</button></li>
              <li>Conf√©rence - 30/09/2025 <button>joindre</button></li>
              <li>Rendez-vous - 03/10/2025 <button>joindre</button></li>
            </ul>
          </div>
        </div>

        <div class="active-members">
          <h3>Les membres les plus actifs</h3>
          <ul>
            <li><img src="{{ url_for('static', filename='images/1.jpeg') }}"> James Anderson <button>Profil</button></li>
            <li><img src="{{ url_for('static', filename='images/2.jpeg') }}"> Jhon Carter <button>Profil</button></li>
            <li><img src="{{ url_for('static', filename='images/3.jpeg') }}"> Michael Johnson <button>Profil</button></li>
            <li><img src="{{ url_for('static', filename='images/7.jpeg') }}"> Olivia Thompson <button>Profil</button></li>
            <li><img src="{{ url_for('static', filename='images/5.jpeg') }}"> William Davis <button>Profil</button></li>
            <li><img src="{{ url_for('static', filename='images/6.jpeg') }}"> Leondo Martinez <button>Profil</button></li>
          </ul>
        </div>
      </section>
    </main>
  </div>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


<script>
  // Bar chart : Recrutements par trimestre
  const barCtx = document.getElementById('barChart').getContext('2d');
  new Chart(barCtx, {
    type: 'bar',
    data: {
      labels: ['T1', 'T2', 'T3', 'T4'],
      datasets: [{
        label: 'Nombre de recrutements',
        data: [12, 19, 7, 15],  // donn√©es exemples
        backgroundColor: 'rgba(37, 99, 235, 0.7)',
        borderColor: 'rgba(37, 99, 235, 1)',
        borderWidth: 1,
        borderRadius: 6,
        hoverBackgroundColor: 'rgba(37, 99, 235, 0.9)'
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true,
          ticks: {
            stepSize: 5
          },
          title: {
            display: true,
            text: 'Nombre d\'employ√©s'
          }
        },
        x: {
          title: {
            display: true,
            text: 'Trimestres'
          }
        }
      },
      plugins: {
        legend: { display: false },
        tooltip: {
          enabled: true,
          backgroundColor: 'rgba(37, 99, 235, 0.9)',
          titleFont: { size: 16 },
          bodyFont: { size: 14 }
        }
      }
    }
  });

  // Pie chart : R√©partition par service
  const pieCtx = document.getElementById('pieChart').getContext('2d');
  new Chart(pieCtx, {
    type: 'pie',
    data: {
      labels: ['RH', 'IT', 'Marketing', 'Finance', 'Production'],
      datasets: [{
        data: [15, 25, 20, 10, 30], // donn√©es exemples
        backgroundColor: [
          '#2563eb', // bleu
          '#f59e0b', // jaune
          '#10b981', // vert
          '#ef4444', // rouge
          '#8b5cf6'  // violet
        ],
        hoverOffset: 30,
        borderColor: '#fff',
        borderWidth: 2
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: {
          position: 'bottom',
          labels: {
            font: { size: 14 },
            color: '#333'
          }
        },
        tooltip: {
          callbacks: {
            label: context => {
              const label = context.label || '';
              const value = context.parsed || 0;
              const total = context.chart._metasets[context.datasetIndex].total;
              const percent = ((value / total) * 100).toFixed(1);
              return `${label}: ${value} (${percent}%)`;
            }
          },
          backgroundColor: '#2563eb',
          titleFont: { size: 16 },
          bodyFont: { size: 14 },
          padding: 10
        }
      }
    }
  });
  
</script>
</body>
</html>
